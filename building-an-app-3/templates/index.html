<!doctype html>
<!--
 Copyright 2021 Google LLC

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<!DOCTYPE html>
<html>

<head>
    <!-- 指定文檔的標題，將在瀏覽器標籤中顯示 -->
    <title>Datastore and Firebase Auth 應用範例</title>

    <!-- 引入 JavaScript 文件。使用 Flask 的 url_for 函數來生成靜態文件的 URL -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>

    <!-- 引入 CSS 樣式表。同樣使用 url_for 函數來引用靜態樣式文件 -->
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />
</head>

<body>
    <!-- 標題顯示應用的名稱 -->
    <!-- <h1>Datastore and Firebase Auth 應用範例</h1> -->

    <!-- 次標題顯示功能描述 -->
    <!-- <h2>最新 10 位訪客訪問時間</h2> -->

    <!-- 使用 Jinja2 模板引擎的 for 循環來遍歷時間列表 -->
    <!-- {% for time in times %} -->
    <!-- 每個訪問時間作為一個段落顯示 -->
    <!-- <p>{{ time }}</p> -->
    <!-- {% endfor %} -->


    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth } from "firebase/auth";
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBxUFpBx-HTFfc1jWnC74TcortO7xakn0I",
            authDomain: "astute-loop-408305.firebaseapp.com",
            projectId: "astute-loop-408305",
            storageBucket: "astute-loop-408305.appspot.com",
            messagingSenderId: "284795440873",
            appId: "1:284795440873:web:1fe983a282e5ad02236a78"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
    </script>

    <div id="firebaseui-auth-container"></div>

    <button id="sign-out" hidden=true>Sign Out</button>

    <div id="login-info" hidden=true>
        <h2>Login info:</h2>
        {% if user_data %}
        <dl>
            <dt>Name</dt>
            <dd>{{ user_data['name'] }}</dd>
            <dt>Email</dt>
            <dd>{{ user_data['email'] }}</dd>
            <dt>Last 10 visits</dt>
            <dd>
                {% for time in times %}
                <p>{{ time['timestamp'] }}</p>
                {% endfor %}
            </dd>
        </dl>
        {% elif error_message %}
        <p>Error: {{ error_message }}</p>
        {% endif %}
    </div>
</body>

</html>